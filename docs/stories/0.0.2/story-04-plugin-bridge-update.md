# Story 04：插件层 API 映射与错误回调

## 目标
- 扩展 Flutter 插件与平台桥接层，完整映射 PCM push/波形/频谱订阅、错误回调与可选播放器适配层 API，保持向后兼容。

## 测试优先（TDD）
- ✔️ [1] MethodChannel 契约测试：push/subscribe/unsubscribe 调用参数校验与回调行为。
- ✖️ [2] 错误回调测试：模拟格式错误/缓冲过载/FFT 错误，Dart 层收到正确错误码文本。
- ✖️ [3] 兼容性测试：旧接口（若有）不回归，新增接口默认参数合理。

## 开发任务
- ✖️ [4] 补充插件侧 API 定义与参数校验，桥接到原生核心事件。
- ✖️ [5] 实现错误码映射表与 Dart 层错误事件分发。
- ✖️ [6] 更新示例调用与文档（README/设计），保持向后兼容策略说明。

## 完成标准（DoD）
- ✖️ [7] 契约/错误测试通过；旧接口可正常工作，新增接口默认值合理。
- ✖️ [8] 文档与示例更新，flutter analyze/test 通过。 
