# Story 04：环形缓冲与回放线程

## 目标
实现环形缓冲（无锁/轻锁）与回放线程骨架，从缓冲取 PCM（可先用静音/测试数据）驱动时钟，确保并发安全与低延迟（TDD）。

## 测试优先（TDD）
- ✔ [1] 先编写 gtest：并发读写正确性、满/空判定、环绕读写覆盖；性能 smoke（大批次写读无崩溃）。
- ✔ [2] 模拟回放线程：验证时钟单调递增、无数据竞争（可配合 TSAN/日志）。

## 开发任务
- ✔ [3] 设计并实现环形缓冲，支持多通道 PCM 帧写入/读取。
- ✔ [4] 回放线程：从缓冲拉取数据，提供时钟回调（position 更新）。
- ✔ [5] 线程同步策略：避免重锁，提供容量/水位监控。
- ✔ [6] 与 `AudioEngine` 对接：play/pause/stop 生命周期管理。

## 完成标准（DoD）
- ✔ [7] gtest 通过：并发/满空/环绕场景与性能 smoke。
- ✔ [8] 回放线程模拟输出：无数据竞争，时钟单调。
- ✔ [9] 文档：缓冲容量配置、线程安全说明。
