# 合作复盘（多模型协作体验）

## 背景
- 主力模型：GPT-5.1-Codex-Max/Medium，偶尔切换 High；代码 review 结合 Gemini-2.5-Pro 与 Codex 交叉审阅。
- 目标：在音频播放与可视化（Flutter 插件 + 原生 + C/C++ 核心）迭代中提升质量与效率。

## 关键体会
1) **不要只听一个 AI**：同一段代码在不同模型上结论差异明显，交叉审阅能暴露隐藏假设。  
2) **Codex 自审严格**：Codex review 自己生成的代码时仍会提出不少问题，覆盖率高；Gemini 相对指出的问题少。重大隐患（线程安全、边界条件、逻辑错）两者通常都会提示，此时应高度重视，倾向拒绝或重写。  
3) **Gemini 定位/修复更快**：在编译失败或功能缺陷场景，Gemini 给出的补丁更直接；Codex 更擅长全面列风险但修复路径有时冗长。

## 成功经验
- **双重评审**：先由生成模型提交，再用另一模型 review，可显著减少遗漏；关键模块（线程/音频/内存）强制二次审查。
- **分工明确**：Codex 负责大跨度重构/设计补充，Gemini 侧重快速修 bug、跑通编译，形成互补。
- **决策规则化**：当两个模型同时标红的隐患，默认进入必修复/拒绝列表；分歧点列成 checklist 再做人工判断。

## 失败与教训
- **过度信任单次输出**：早期曾直接采纳单模型的“看似合理”修改，后续 review 发现边界遗漏，说明需要系统化的二审。
- **修复路径偏长**：Codex 给出的修复方案有时复杂，若不引入第二模型对比，容易走弯路。
- **信号缺乏基准**：缺少自动化基准（编译/测试/golden），让“AI 说没问题”的判断缺乏硬性佐证。

## 改进方向
- **制度化多模型审查**：关键提交必须经过至少两种模型 + 人工 spot check；对相同警告设定统一优先级处理。
- **基准与验证先行**：在 CI 中增加编译、单测、频谱/波形 golden 对比，减少对主观 review 的依赖。
- **问题分派策略**：复杂设计/重构交给 Codex，编译/快速修复先尝试 Gemini，再由 Codex 复核风险。
- **复盘知识库**：沉淀常见误报/高价值警告的案例，指导后续模型提示的取舍与优先级。
